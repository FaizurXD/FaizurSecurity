{
  "version": 3,
  "sources": ["../../events/antiAlts.ts"],
  "sourcesContent": ["import type { TextChannel, GuildMember } from \"discord.js\";\nimport { Events, EmbedBuilder, Colors, PermissionFlagsBits } from \"discord.js\";\nimport prisma from \"../database.js\";\n\nexport default class AntiAlts {\n\tname = Events.GuildMemberAdd;\n\n\tasync run(member: GuildMember) {\n\t\tconst guild = await prisma.guild.findUnique({\n\t\t\twhere: { guild: member.guild?.id },\n\t\t\tselect: { logs: true, antiAlts: true },\n\t\t});\n\n\t\tif (!guild?.antiAlts) return;\n\n\t\tconst logs = member.guild?.channels.cache.get(\n\t\t\tguild?.logs ?? \"\",\n\t\t) as TextChannel;\n\n\t\tconst accAge = Math.abs(Date.now() - member.user.createdTimestamp);\n\t\tconst accDays = Math.ceil(accAge / (1000 * 60 * 60 * 24));\n\t\tif (accDays <= 7) {\n\t\t\tconst user = member.user;\n\t\t\tif (\n\t\t\t\t!member.guild?.members?.me?.permissions?.has(\n\t\t\t\t\tPermissionFlagsBits.KickMembers,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tconst errorEmbed = new EmbedBuilder({\n\t\t\t\t\ttitle: \"Alt Account Detected!\",\n\t\t\t\t\tdescription: `<:arrow:1068604670764916876> ${user} was detected as a alternative account.\n\t        <:arrow:1068604670764916876> They were not kicked by the **Anti Alts system** because I don't have permission to kick members\n\t        <:arrow:1068604670764916876> This happened at: <t:${Math.floor(\n\t\t\t\t\t\tDate.now() / 1000,\n\t\t\t\t\t)}:R>`,\n\t\t\t\t\tthumbnail: {\n\t\t\t\t\t\turl: user.displayAvatarURL(),\n\t\t\t\t\t},\n\t\t\t\t\tcolor: 0x2b2d31,\n\t\t\t\t});\n\n\t\t\t\tawait logs.send({ embeds: [errorEmbed] });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!member) return;\n\n\t\t\ttry {\n\t\t\t\tawait member.kick(\"Alt account\");\n\t\t\t} catch {\n\t\t\t\tconst errorEmbed = new EmbedBuilder({\n\t\t\t\t\ttitle: \"Alt Account Detected!\",\n\t\t\t\t\tdescription: `<:arrow:1068604670764916876> ${user} was detected as a alternative account.\n\t        <:arrow:1068604670764916876> They were not kicked by the **Anti Alts system** because they had higher permitions that myself\n\t        <:arrow:1068604670764916876> This happened at: <t:${Math.floor(\n\t\t\t\t\t\tDate.now() / 1000,\n\t\t\t\t\t)}:R>`,\n\t\t\t\t\tthumbnail: {\n\t\t\t\t\t\turl: user.displayAvatarURL(),\n\t\t\t\t\t},\n\t\t\t\t\tcolor: 0x2b2d31,\n\t\t\t\t});\n\n\t\t\t\tawait logs.send({ embeds: [errorEmbed] });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst embed = new EmbedBuilder({\n\t\t\t\ttitle: \"Alt Account Detected!\",\n\t\t\t\tdescription: `<:arrow:1068604670764916876> ${user} was detected as a alternative account.\n        <:arrow:1068604670764916876> They were kicked by the **Anti Alts system**\n        <:arrow:1068604670764916876> This happened at: <t:${Math.floor(\n\t\t\t\t\tDate.now() / 1000,\n\t\t\t\t)}:R>`,\n\t\t\t\tthumbnail: {\n\t\t\t\t\turl: user.displayAvatarURL(),\n\t\t\t\t},\n\t\t\t\tcolor: 0x2b2d31,\n\t\t\t});\n\n\t\t\tawait logs?.send({ embeds: [embed] });\n\t\t}\n\t}\n}\n"],
  "mappings": ";AACA,SAAS,QAAQ,cAAsB,2BAA2B;AAClE,OAAO,YAAY;AAEnB,qBAAqB,SAAS;AAAA,EAC7B,OAAO,OAAO;AAAA,EAEd,MAAM,IAAI,QAAqB;AAPhC;AAQE,UAAM,QAAQ,MAAM,OAAO,MAAM,WAAW;AAAA,MAC3C,OAAO,EAAE,QAAO,YAAO,UAAP,mBAAc,GAAG;AAAA,MACjC,QAAQ,EAAE,MAAM,MAAM,UAAU,KAAK;AAAA,IACtC,CAAC;AAED,QAAI,EAAC,+BAAO;AAAU;AAEtB,UAAM,QAAO,YAAO,UAAP,mBAAc,SAAS,MAAM;AAAA,OACzC,+BAAO,SAAQ;AAAA;AAGhB,UAAM,SAAS,KAAK,IAAI,KAAK,IAAI,IAAI,OAAO,KAAK,gBAAgB;AACjE,UAAM,UAAU,KAAK,KAAK,UAAU,MAAO,KAAK,KAAK,GAAG;AACxD,QAAI,WAAW,GAAG;AACjB,YAAM,OAAO,OAAO;AACpB,UACC,GAAC,8BAAO,UAAP,mBAAc,YAAd,mBAAuB,OAAvB,mBAA2B,gBAA3B,mBAAwC;AAAA,QACxC,oBAAoB;AAAA,UAEpB;AACD,cAAM,aAAa,IAAI,aAAa;AAAA,UACnC,OAAO;AAAA,UACP,aAAa,gCAAgC,IAAI;AAAA;AAAA,6DAEO,KAAK;AAAA,YAC5D,KAAK,IAAI,IAAI;AAAA,UACd,CAAC;AAAA,UACD,WAAW;AAAA,YACV,KAAK,KAAK,iBAAiB;AAAA,UAC5B;AAAA,UACA,OAAO;AAAA,QACR,CAAC;AAED,cAAM,KAAK,KAAK,EAAE,QAAQ,CAAC,UAAU,EAAE,CAAC;AACxC;AAAA,MACD;AAEA,UAAI,CAAC;AAAQ;AAEb,UAAI;AACH,cAAM,OAAO,KAAK,aAAa;AAAA,MAChC,QAAQ;AACP,cAAM,aAAa,IAAI,aAAa;AAAA,UACnC,OAAO;AAAA,UACP,aAAa,gCAAgC,IAAI;AAAA;AAAA,6DAEO,KAAK;AAAA,YAC5D,KAAK,IAAI,IAAI;AAAA,UACd,CAAC;AAAA,UACD,WAAW;AAAA,YACV,KAAK,KAAK,iBAAiB;AAAA,UAC5B;AAAA,UACA,OAAO;AAAA,QACR,CAAC;AAED,cAAM,KAAK,KAAK,EAAE,QAAQ,CAAC,UAAU,EAAE,CAAC;AACxC;AAAA,MACD;AAEA,YAAM,QAAQ,IAAI,aAAa;AAAA,QAC9B,OAAO;AAAA,QACP,aAAa,gCAAgC,IAAI;AAAA;AAAA,4DAEO,KAAK;AAAA,UAC5D,KAAK,IAAI,IAAI;AAAA,QACd,CAAC;AAAA,QACD,WAAW;AAAA,UACV,KAAK,KAAK,iBAAiB;AAAA,QAC5B;AAAA,QACA,OAAO;AAAA,MACR,CAAC;AAED,aAAM,6BAAM,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE;AAAA,IACpC;AAAA,EACD;AACD;",
  "names": []
}
