{
  "version": 3,
  "sources": ["../../commands/clear.ts"],
  "sourcesContent": ["import type { ChatInputCommandInteraction } from \"discord.js\";\nimport { SlashCommandBuilder, PermissionFlagsBits } from \"discord.js\";\nimport { successEmbedBuilder, errorEmbedBuilder } from \"../utils.js\";\nimport prisma from \"../database.js\";\n\nexport default class Clear {\n\tdata = new SlashCommandBuilder()\n\t\t.setName(\"clear\")\n\t\t.setNameLocalizations({ \"es-ES\": \"eliminar\" })\n\t\t.setDescription(\"Deletes a channel/role with the specified name\")\n\t\t.setDescriptionLocalizations({\n\t\t\t\"es-ES\": \"Elmina un canal/rol con el nombre especificado\",\n\t\t})\n\t\t.setDefaultMemberPermissions(PermissionFlagsBits.Administrator)\n\t\t.addStringOption((option) =>\n\t\t\toption\n\t\t\t\t.setName(\"option\")\n\t\t\t\t.setNameLocalizations({ \"es-ES\": \"opci\u00F3n\" })\n\t\t\t\t.setDescription(\"Select role, channel, or messages\")\n\t\t\t\t.setDescriptionLocalizations({\n\t\t\t\t\t\"es-ES\": \"Selecciona rol, canal, o mensajes\",\n\t\t\t\t})\n\t\t\t\t.setChoices(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"role\",\n\t\t\t\t\t\tvalue: \"role\",\n\t\t\t\t\t\tname_localizations: { \"es-ES\": \"rol\" },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"channel\",\n\t\t\t\t\t\tvalue: \"channel\",\n\t\t\t\t\t\tname_localizations: { \"es-ES\": \"canal\" },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"messages\",\n\t\t\t\t\t\tvalue: \"messages\",\n\t\t\t\t\t\tname_localizations: { \"es-ES\": \"mensajes\" },\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.setRequired(true),\n\t\t)\n\t\t.addStringOption((option) =>\n\t\t\toption\n\t\t\t\t.setName(\"name\")\n\t\t\t\t.setNameLocalizations({ \"es-ES\": \"nombre\" })\n\t\t\t\t.setDescription(\n\t\t\t\t\t\"Pass the name of the channels/roles you want to delete (only for channels/roles)\",\n\t\t\t\t)\n\t\t\t\t.setDescriptionLocalizations({\n\t\t\t\t\t\"es-ES\":\n\t\t\t\t\t\t\"Pasa el nombre de los canales/roles que quieres borrar (solo para canales o roles)\",\n\t\t\t\t}),\n\t\t)\n\t\t.addIntegerOption((amount) =>\n\t\t\tamount\n\t\t\t\t.setName(\"amount\")\n\t\t\t\t.setNameLocalizations({ \"es-ES\": \"cantidad\" })\n\t\t\t\t.setDescription(\n\t\t\t\t\t\"You can pass an integer up to 100 (only for messages).\",\n\t\t\t\t)\n\t\t\t\t.setDescriptionLocalizations({\n\t\t\t\t\t\"es-ES\":\n\t\t\t\t\t\t\"Puedes pasar un n\u00FAmero entero hasta 100 (solo para mensajes).\",\n\t\t\t\t}),\n\t\t);\n\n\tasync run(interaction: ChatInputCommandInteraction) {\n\t\tif (!interaction.inGuild()) {\n\t\t\tawait interaction.reply({\n\t\t\t\tembeds: [\n\t\t\t\t\terrorEmbedBuilder(\"This command can only be run on a server!\"),\n\t\t\t\t],\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst option = interaction.options.getString(\"option\", true);\n\t\tconst name = interaction.options.getString(\"name\");\n\t\tconst amount = interaction.options.getInteger(\"amount\");\n\n\t\tconst guild = await prisma.guild.findUnique({\n\t\t\twhere: {\n\t\t\t\tguild: interaction.guildId,\n\t\t\t},\n\t\t\tselect: {\n\t\t\t\tlogs: true,\n\t\t\t},\n\t\t});\n\n\t\tawait interaction.deferReply({ ephemeral: true });\n\n\t\tswitch (option) {\n\t\t\tcase \"role\":\n\t\t\t\tif (!name) {\n\t\t\t\t\tawait interaction\n\t\t\t\t\t\t.editReply({\n\t\t\t\t\t\t\tembeds: [errorEmbedBuilder(\"No channel names provided!\")],\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tinteraction.guild?.roles.cache\n\t\t\t\t\t.filter((r) => r.name === name)\n\t\t\t\t\t.forEach(\n\t\t\t\t\t\tasync (r) =>\n\t\t\t\t\t\t\tawait r\n\t\t\t\t\t\t\t\t.delete(`Requested by ${interaction.user}!`)\n\t\t\t\t\t\t\t\t.catch(() => {}),\n\t\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase \"channel\":\n\t\t\t\tif (!name) {\n\t\t\t\t\tawait interaction\n\t\t\t\t\t\t.editReply({\n\t\t\t\t\t\t\tembeds: [errorEmbedBuilder(\"No channel names provided!\")],\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tinteraction.guild?.channels.cache\n\t\t\t\t\t.filter((c) => c.name === name)\n\t\t\t\t\t.forEach(\n\t\t\t\t\t\tasync (c) =>\n\t\t\t\t\t\t\tawait c\n\t\t\t\t\t\t\t\t.delete(`Requested by ${interaction.user}!`)\n\t\t\t\t\t\t\t\t.catch(() => {}),\n\t\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase \"messages\":\n\t\t\t\tif ((amount ?? 0) > 100) {\n\t\t\t\t\tawait interaction.editReply({\n\t\t\t\t\t\tembeds: [\n\t\t\t\t\t\t\terrorEmbedBuilder(\"The amount should be equal or less than 100\"),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\t[...(await interaction.channel?.messages.fetch()).values()].slice(0, amount).forEach(\n\t\t\t\t\t\tasync (m) => {\n\t\t\t\t\t\t\tawait m.delete().catch(() => {})\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\tawait interaction.editReply({\n\t\t\t\t\t\tembeds: [\n\t\t\t\t\t\t\tsuccessEmbedBuilder(\n\t\t\t\t\t\t\t\t`Successfully deleted **${amount ?? 0}** messages`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\tawait interaction.editReply({\n\t\t\t\t\t\tembeds: [\n\t\t\t\t\t\t\terrorEmbedBuilder(\"Can't delete messages older than 14 days\"),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t}\n\n\t\tif (option !== \"messages\") {\n\t\t\tawait interaction\n\t\t\t\t.editReply({\n\t\t\t\t\tembeds: [\n\t\t\t\t\t\tsuccessEmbedBuilder(`Deleted all ${option}s with name **${name}**`),\n\t\t\t\t\t],\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
