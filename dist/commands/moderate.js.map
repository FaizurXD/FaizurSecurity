{
  "version": 3,
  "sources": ["../../commands/moderate.ts"],
  "sourcesContent": ["import type { ChatInputCommandInteraction, GuildMember, TextChannel } from \"discord.js\";\nimport {\n\tSlashCommandBuilder,\n\tEmbedBuilder,\n\tColors,\n\tPermissionFlagsBits,\n} from \"discord.js\";\nimport { successEmbedBuilder, errorEmbedBuilder, buttons, logBuilder } from \"../utils.js\";\nimport { nanoid } from \"nanoid/non-secure\";\nimport prisma from \"../database.js\";\n\nexport default class Moderate {\n\tdata = new SlashCommandBuilder()\n\t\t.setName(\"modnick\")\n\t\t.setNameLocalizations({ \"es-ES\": \"moderar-apodo\" })\n\t\t.setDescription(\"Moderate a users name to one that can be mentioned!\")\n\t\t.setDescriptionLocalizations({\n\t\t\t\"es-ES\":\n\t\t\t\t\"Cambia el nombre de usuario a uno que pueda ser mencionado!\",\n\t\t})\n\t\t.setDefaultMemberPermissions(PermissionFlagsBits.ManageNicknames)\n\t\t.addUserOption((option) =>\n\t\t\toption\n\t\t\t\t.setName(\"user\")\n\t\t\t\t.setNameLocalizations({ \"es-ES\": \"usuario\" })\n\t\t\t\t.setDescription(\"You can pass a mention or an id of a user.\")\n\t\t\t\t.setDescriptionLocalizations({\n\t\t\t\t\t\"es-ES\": \"Puedes pasar una menci\u00F3n o un id de un usuario\",\n\t\t\t\t})\n\t\t\t\t.setRequired(true),\n\t\t);\n\n\tasync run(interaction: ChatInputCommandInteraction) {\n\t\tconst member = interaction.options.getMember(\"user\") as GuildMember;\n\n\t\tif (!interaction.inGuild()) {\n\t\t\tawait interaction.reply({\n\t\t\t\tembeds: [\n\t\t\t\t\terrorEmbedBuilder(\"This command can only be run on a server!\"),\n\t\t\t\t],\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (!member) {\n\t\t\tawait interaction.reply({\n\t\t\t\tembeds: [errorEmbedBuilder(\"That user is not on this server!\")],\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t!interaction.guild?.members?.me?.permissions?.has(\n\t\t\t\tPermissionFlagsBits.ManageNicknames,\n\t\t\t)\n\t\t) {\n\t\t\tawait interaction.reply({\n\t\t\t\tembeds: [\n\t\t\t\t\terrorEmbedBuilder(\n\t\t\t\t\t\t\"The bot doesn't have permissions to manage member's nicknames!\",\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t\tephemeral: true,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait member.setNickname(\n\t\t\t\t`Moderated ${nanoid(12)}`,\n\t\t\t\t\"Username/Nickname could not be mentioned\",\n\t\t\t);\n\n\t\t\tawait interaction.reply({\n\t\t\t\tembeds: [successEmbedBuilder(`Moderated ${member}'s username!`)],\n\t\t\t\tephemeral: true,\n\t\t\t});\n\n\t\t\tconst guild = await prisma.guild.findUnique({\n\t\t\t\twhere: { guild: interaction.guildId },\n\t\t\t\tselect: { logs: true },\n\t\t\t});\n\t\n\t\t\tconst logs = interaction.guild?.channels.cache.get(\n\t\t\t\tguild?.logs ?? \"\",\n\t\t\t) as TextChannel;\n\t\t\n\t\t\tlogs?.send(\n\t\t\t\tlogBuilder({\n\t\t\t\t\tmember: interaction.member as GuildMember,\n\t\t\t\t\treason: `${member.user} nickname moderated`,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t} catch {\n\t\t\tawait interaction.reply({\n\t\t\t\tembeds: [\n\t\t\t\t\terrorEmbedBuilder(\"Can't moderate this user's nickname, if this problem persists, please contact support\")\n\t\t\t\t],\n\t\t\t\tcomponents: [buttons],\n\t\t\t\tephemeral: true,\n\t\t\t});\n\t\t}\n\t}\n}\n"],
  "mappings": ";AACA;AAAA,EACC;AAAA,EAGA;AAAA,OACM;AACP,SAAS,qBAAqB,mBAAmB,SAAS,kBAAkB;AAC5E,SAAS,cAAc;AACvB,OAAO,YAAY;AAEnB,qBAAqB,SAAS;AAAA,EAC7B,OAAO,IAAI,oBAAoB,EAC7B,QAAQ,SAAS,EACjB,qBAAqB,EAAE,SAAS,gBAAgB,CAAC,EACjD,eAAe,qDAAqD,EACpE,4BAA4B;AAAA,IAC5B,SACC;AAAA,EACF,CAAC,EACA,4BAA4B,oBAAoB,eAAe,EAC/D;AAAA,IAAc,CAAC,WACf,OACE,QAAQ,MAAM,EACd,qBAAqB,EAAE,SAAS,UAAU,CAAC,EAC3C,eAAe,4CAA4C,EAC3D,4BAA4B;AAAA,MAC5B,SAAS;AAAA,IACV,CAAC,EACA,YAAY,IAAI;AAAA,EACnB;AAAA,EAED,MAAM,IAAI,aAA0C;AAhCrD;AAiCE,UAAM,SAAS,YAAY,QAAQ,UAAU,MAAM;AAEnD,QAAI,CAAC,YAAY,QAAQ,GAAG;AAC3B,YAAM,YAAY,MAAM;AAAA,QACvB,QAAQ;AAAA,UACP,kBAAkB,2CAA2C;AAAA,QAC9D;AAAA,MACD,CAAC;AACD;AAAA,IACD;AAEA,QAAI,CAAC,QAAQ;AACZ,YAAM,YAAY,MAAM;AAAA,QACvB,QAAQ,CAAC,kBAAkB,kCAAkC,CAAC;AAAA,MAC/D,CAAC;AACD;AAAA,IACD;AAEA,QACC,GAAC,mCAAY,UAAZ,mBAAmB,YAAnB,mBAA4B,OAA5B,mBAAgC,gBAAhC,mBAA6C;AAAA,MAC7C,oBAAoB;AAAA,QAEpB;AACD,YAAM,YAAY,MAAM;AAAA,QACvB,QAAQ;AAAA,UACP;AAAA,YACC;AAAA,UACD;AAAA,QACD;AAAA,QACA,WAAW;AAAA,MACZ,CAAC;AACD;AAAA,IACD;AAEA,QAAI;AACH,YAAM,OAAO;AAAA,QACZ,aAAa,OAAO,EAAE,CAAC;AAAA,QACvB;AAAA,MACD;AAEA,YAAM,YAAY,MAAM;AAAA,QACvB,QAAQ,CAAC,oBAAoB,aAAa,MAAM,cAAc,CAAC;AAAA,QAC/D,WAAW;AAAA,MACZ,CAAC;AAED,YAAM,QAAQ,MAAM,OAAO,MAAM,WAAW;AAAA,QAC3C,OAAO,EAAE,OAAO,YAAY,QAAQ;AAAA,QACpC,QAAQ,EAAE,MAAM,KAAK;AAAA,MACtB,CAAC;AAED,YAAM,QAAO,iBAAY,UAAZ,mBAAmB,SAAS,MAAM;AAAA,SAC9C,+BAAO,SAAQ;AAAA;AAGhB,mCAAM;AAAA,QACL,WAAW;AAAA,UACV,QAAQ,YAAY;AAAA,UACpB,QAAQ,GAAG,OAAO,IAAI;AAAA,QACvB,CAAC;AAAA;AAAA,IAGH,QAAQ;AACP,YAAM,YAAY,MAAM;AAAA,QACvB,QAAQ;AAAA,UACP,kBAAkB,uFAAuF;AAAA,QAC1G;AAAA,QACA,YAAY,CAAC,OAAO;AAAA,QACpB,WAAW;AAAA,MACZ,CAAC;AAAA,IACF;AAAA,EACD;AACD;",
  "names": []
}
