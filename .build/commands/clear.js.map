{
  "version": 3,
  "sources": ["../../commands/clear.ts"],
  "sourcesContent": ["import type { ChatInputCommandInteraction, GuildMember, TextChannel } from 'discord.js';\nimport { SlashCommandBuilder, PermissionFlagsBits } from 'discord.js';\nimport { errorEmbedBuilder, successEmbedBuilder, logBuilder } from '../utils.js';\nimport prisma from '../database.js';\n\nexport default class Clear {\n\tdata = new SlashCommandBuilder()\n\t\t.setName('clear')\n\t\t.setDefaultMemberPermissions(PermissionFlagsBits.Administrator)\n\t\t.setDescription('Clear messages in a channel!')\n\t\t.addIntegerOption(amount => amount.setName('amount').setDescription('You can pass an integer up to 100').setRequired(true));\n\n\tasync run(interaction: ChatInputCommandInteraction) {\n\t\tif (!interaction.inGuild()) {\n\t\t\tawait interaction.reply({ embeds: [errorEmbedBuilder('This command can only be run on a server!')] });\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst amount = interaction.options.getInteger('amount', true);\n\n\t\t\tif (amount > 100) {\n\t\t\t\tawait interaction.reply({ embeds: [errorEmbedBuilder('The amount should be equal or less than 100')], ephemeral: true });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { size } = await interaction.channel?.bulkDelete(amount)!;\n\t\t\tawait interaction.reply({ embeds: [successEmbedBuilder(`Successfully deleted **${size}** messages`)], ephemeral: true });\n\n\t\t\tconst guild = await prisma.guild.findUnique({\n\t\t\t\twhere: { guild: interaction.guildId },\n\t\t\t\tselect: { logs: true },\n\t\t\t});\n\n\t\t\tconst logs = interaction.guild?.channels.cache.get(guild?.logs!) as TextChannel;\n\t\t\tawait logs?.send(\n\t\t\t\tlogBuilder({\n\t\t\t\t\tmember: interaction.member as GuildMember,\n\t\t\t\t\tcontent: `${interaction.user} has cleared **${size}** messages in ${interaction.channel}!`,\n\t\t\t\t\treason: `Bulk delete made by ${interaction.user.tag}`,\n\t\t\t\t})\n\t\t\t);\n\t\t} catch {\n\t\t\tawait interaction.reply({ embeds: [errorEmbedBuilder('You can only delete messages that are less than 14 days old.')] });\n\t\t}\n\t}\n}\n"],
  "mappings": "AACA,SAAS,qBAAqB,2BAA2B;AACzD,SAAS,mBAAmB,qBAAqB,kBAAkB;AACnE,OAAO,YAAY;AAEnB,qBAAqB,MAAM;AAAA,EAA3B;AACC,gBAAO,IAAI,oBAAoB,EAC7B,QAAQ,OAAO,EACf,4BAA4B,oBAAoB,aAAa,EAC7D,eAAe,8BAA8B,EAC7C,iBAAiB,YAAU,OAAO,QAAQ,QAAQ,EAAE,eAAe,mCAAmC,EAAE,YAAY,IAAI,CAAC;AAAA;AAAA,EAE3H,MAAM,IAAI,aAA0C;AAZrD;AAaE,QAAI,CAAC,YAAY,QAAQ,GAAG;AAC3B,YAAM,YAAY,MAAM,EAAE,QAAQ,CAAC,kBAAkB,2CAA2C,CAAC,EAAE,CAAC;AACpG;AAAA,IACD;AAEA,QAAI;AACH,YAAM,SAAS,YAAY,QAAQ,WAAW,UAAU,IAAI;AAE5D,UAAI,SAAS,KAAK;AACjB,cAAM,YAAY,MAAM,EAAE,QAAQ,CAAC,kBAAkB,6CAA6C,CAAC,GAAG,WAAW,KAAK,CAAC;AACvH;AAAA,MACD;AAEA,YAAM,EAAE,KAAK,IAAI,QAAM,iBAAY,YAAZ,mBAAqB,WAAW;AACvD,YAAM,YAAY,MAAM,EAAE,QAAQ,CAAC,oBAAoB,0BAA0B,iBAAiB,CAAC,GAAG,WAAW,KAAK,CAAC;AAEvH,YAAM,QAAQ,MAAM,OAAO,MAAM,WAAW;AAAA,QAC3C,OAAO,EAAE,OAAO,YAAY,QAAQ;AAAA,QACpC,QAAQ,EAAE,MAAM,KAAK;AAAA,MACtB,CAAC;AAED,YAAM,QAAO,iBAAY,UAAZ,mBAAmB,SAAS,MAAM,IAAI,+BAAO;AAC1D,aAAM,6BAAM;AAAA,QACX,WAAW;AAAA,UACV,QAAQ,YAAY;AAAA,UACpB,SAAS,GAAG,YAAY,sBAAsB,sBAAsB,YAAY;AAAA,UAChF,QAAQ,uBAAuB,YAAY,KAAK;AAAA,QACjD,CAAC;AAAA;AAAA,IAEH,QAAE;AACD,YAAM,YAAY,MAAM,EAAE,QAAQ,CAAC,kBAAkB,8DAA8D,CAAC,EAAE,CAAC;AAAA,IACxH;AAAA,EACD;AACD;",
  "names": []
}
