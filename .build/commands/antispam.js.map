{
  "version": 3,
  "sources": ["../../commands/antispam.ts"],
  "sourcesContent": ["import type { ChatInputCommandInteraction } from 'discord.js';\nimport { SlashCommandBuilder, PermissionFlagsBits } from 'discord.js';\nimport { defaultError, successEmbedBuilder, errorEmbedBuilder } from '../utils.js';\nimport prisma from '../database.js';\n\nexport default class AntiSpam {\n\tdata = new SlashCommandBuilder()\n\t\t.setName('antispam')\n\t\t.setDescription('Toggle Anti Spam in your server!')\n\t\t.setDefaultMemberPermissions(PermissionFlagsBits.Administrator)\n\t\t.addSubcommand(subcommand => subcommand.setName('on').setDescription('turn anti spam on!'))\n\t\t.addSubcommand(subcommand => subcommand.setName('off').setDescription('turn anti spam off!'))\n\t\t.addSubcommand(subcommand =>\n\t\t\tsubcommand\n\t\t\t\t.setName('minutes')\n\t\t\t\t.setDescription('How many minutes will the spammer be muted, default is 5')\n\t\t\t\t.addIntegerOption(option =>\n\t\t\t\t\toption.setName('minutes').setDescription('You can pass an integer which will the determines the minutes of the mute').setRequired(true)\n\t\t\t\t)\n\t\t)\n\t\t.addSubcommand(subcommand =>\n\t\t\tsubcommand\n\t\t\t\t.setName('limit')\n\t\t\t\t.setDescription('How many messages will the spammer have to send before being muted, default is 7')\n\t\t\t\t.addIntegerOption(option =>\n\t\t\t\t\toption\n\t\t\t\t\t\t.setName('limit')\n\t\t\t\t\t\t.setDescription('You can pass an integer which will the determines the amount of messages before a mute')\n\t\t\t\t\t\t.setRequired(true)\n\t\t\t\t)\n\t\t);\n\n\tasync run(interaction: ChatInputCommandInteraction) {\n\t\ttry {\n\t\t\tif (!interaction.inGuild()) {\n\t\t\t\tawait interaction.reply({ embeds: [errorEmbedBuilder('This command can only be run on a server!')] });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait interaction.deferReply({ ephemeral: true });\n\n\t\t\tswitch (interaction.options.getSubcommand()) {\n\t\t\t\tcase 'on':\n\t\t\t\t\tawait prisma.guild.upsert({\n\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdate: {\n\t\t\t\t\t\t\tantiSpam: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t\tantiSpam: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tawait interaction.editReply({ embeds: [successEmbedBuilder(`anti spam filter has been activated successfully!`)] });\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'off':\n\t\t\t\t\tawait prisma.guild.upsert({\n\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdate: {\n\t\t\t\t\t\t\tantiSpam: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t\tantiSpam: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tawait interaction.editReply({ embeds: [successEmbedBuilder(`anti spam filter has been deactivated successfully!`)] });\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'minutes':\n\t\t\t\t\tconst minutes = interaction.options.getInteger('minutes', true);\n\n\t\t\t\t\tawait prisma.guild.upsert({\n\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdate: {\n\t\t\t\t\t\t\tspamMinutes: minutes,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t\tspamMinutes: minutes,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tawait interaction.editReply({ embeds: [successEmbedBuilder(`Changed timeout time to ${minutes} minutes`)] });\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'limit':\n\t\t\t\t\tconst limit = interaction.options.getInteger('limit', true);\n\n\t\t\t\t\tawait prisma.guild.upsert({\n\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdate: {\n\t\t\t\t\t\t\tspamMessageLimit: limit,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\tguild: interaction.guildId,\n\t\t\t\t\t\t\tspamMessageLimit: limit,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tawait interaction.editReply({ embeds: [successEmbedBuilder(`Changed message limit to ${limit}!`)] });\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} catch {\n\t\t\tawait interaction.editReply(defaultError);\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
